from django.core.management.base import BaseCommand

from home.models import TrendKeyword

# ✅ 최소 16개 지역 × 각 5개 키워드 (80개 이상)
DATA = {
    "강남구": ["혼밥 맛집", "점심 세트", "브런치", "테이크아웃", "여름 음료"],
    "마포구": ["카공 카페", "감성 인테리어", "디저트", "사진 스팟", "에이드"],
    "용산구": ["브런치", "프리미엄", "테라스", "스테이크", "디저트"],
    "서초구": [
        "프리미엄 커피",
        "디저트 플레이트",
        "브런치 카페",
        "단체석",
        "비즈니스 모임",
    ],
    "송파구": ["석촌호수 카페", "야경 맛집", "디저트", "브런치", "데이트 장소"],
    "강동구": ["가성비 점심", "치킨 맛집", "카페 거리", "야외 테라스", "홈파티 음식"],
    "동대문구": ["시장 먹거리", "전통 음식", "분식", "노포 식당", "야식 추천"],
    "종로구": ["한옥 카페", "전통차", "역사 여행", "고궁 근처 맛집", "골목 맛집"],
    "중구": ["명동 맛집", "쇼핑 거리", "디저트 카페", "한식당", "외국인 인기"],
    "광진구": [
        "건대 맛집",
        "술집 추천",
        "퓨전 음식",
        "노래방 근처 카페",
        "젊은 분위기",
    ],
    "성동구": ["성수 카페", "핸드메이드", "베이커리", "디자인 감성", "사진 스팟"],
    "은평구": ["가족 외식", "자연 친화", "한식 맛집", "건강식", "브런치 카페"],
    "노원구": ["대학가 맛집", "치킨", "분식", "카페 거리", "단체 모임"],
    "구로구": ["직장인 점심", "중식당", "야근 음식", "치맥", "포장마차"],
    "금천구": ["가성비 점심", "분식", "소규모 카페", "한식당", "테이크아웃"],
    "양천구": ["목동 카페", "베이커리", "가족 외식", "피자", "샐러드"],
    "영등포구": ["여의도 회식", "프리미엄 뷔페", "점심 세트", "스테이크", "루프탑 바"],
    "서대문구": ["신촌 맛집", "대학가 카페", "감성 술집", "분식", "브런치"],
    "모현읍": ["로컬 맛집", "전원 카페", "자연 뷰", "농가 레스토랑", "힐링 공간"],
}


class Command(BaseCommand):
    help = "Seed TrendKeyword for home dashboard (safe to re-run, upsert behavior)"

    def handle(self, *args, **options):
        created = 0
        for region, words in DATA.items():
            for kw in words:
                obj, was_created = TrendKeyword.objects.get_or_create(
                    region=region, keyword=kw
                )
                if was_created:
                    created += 1
        self.stdout.write(self.style.SUCCESS(f"Seeded {created} TrendKeyword rows"))
